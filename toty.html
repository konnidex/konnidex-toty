<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>KD | TOTY</title>

<style>
body {
    background: url("https://github.com/konnidex/konnidex-toty/blob/main/images/webbackground.PNG?raw=true") no-repeat center center fixed;
    background-size: cover;
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 20px;
}


.formation {
    width: 600px;
    margin: auto;
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    grid-template-rows: repeat(4, 120px);
    gap: 15px;
    color:#d4c369;
}

.box {
    width: 110px;
    height: 110px;
    background: #0e3460;
    border: 2px solid #d4c369;
    display: flex;
    justify-content: center;
    align-items: center;
}

.box img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 8px;
}

#LW { grid-column: 1; grid-row: 1; }
#ST { grid-column: 3; grid-row: 1; }
#RW { grid-column: 5; grid-row: 1; }

#CM1 { grid-column: 2; grid-row: 2; }
#CM2 { grid-column: 3; grid-row: 2; }
#CM3 { grid-column: 4; grid-row: 2; }

#LB { grid-column: 1; grid-row: 3; }
#CB1 { grid-column: 2; grid-row: 3; }
#CB2 { grid-column: 4; grid-row: 3; }
#RB { grid-column: 5; grid-row: 3; }

#GK { grid-column: 3; grid-row: 4; }

.tabs {
    margin-top: 40px;
    display: flex;
    justify-content: center;
    gap: 8px;         /* smaller gap so they fit on mobile */
    flex-wrap: nowrap; /* keep them in ONE row */
}

.tabs button {
    padding: 8px 15px;   /* smaller padding for mobile */
    font-size: 15px;     /* slightly smaller text */
    cursor: pointer;
    border: none;
    background: #0e3460;
    color: #d4c369;
    border-radius: 5px;
    white-space: nowrap; /* forces text to stay on one line */
}


.tabs button.active {
    background: #0d47a1;
}

.slider-container {
    margin-top: 40px;
    width: 100%;
    overflow-x: auto;
    white-space: nowrap;
    padding: 10px;
    touch-action: none;      
    pointer-events: auto;
}

.player-img {
    width: 90px;
    height: 90px;
    object-fit: cover;
    cursor: grab;
    margin: 5px;
    display: inline-block;
}
@media (max-width: 600px) {
    /* Center the tabs */
    .tabs {
        justify-content: center; /* already center, just to be sure */
        margin: 20px auto;       /* add auto horizontal margin */
        width: 100%;
        padding: 0 10px;         /* small side padding */
        box-sizing: border-box;
    }

    /* Center the slider container */
    .slider-container {
        display: flex;
        justify-content: center; /* center the player images */
        overflow: hidden;
        width: 100%;
        padding: 0 10px;         /* small side padding */
        box-sizing: border-box;
    }

    /* Ensure player images stay inline-block */
    .player-img {
        display: inline-block;
        margin: 5px;
    }
}

</style>
</head>
<body>
<div class="formation">
    <div class="box" id="LW" data-type="attackers">ATT</div>
    <div class="box" id="ST" data-type="attackers">ATT</div>
    <div class="box" id="RW" data-type="attackers">ATT</div>

    <div class="box" id="CM1" data-type="midfielders">MID</div>
    <div class="box" id="CM2" data-type="midfielders">MID</div>
    <div class="box" id="CM3" data-type="midfielders">MID</div>

    <div class="box" id="LB" data-type="defenders">DEF</div>
    <div class="box" id="CB1" data-type="defenders">DEF</div>
    <div class="box" id="CB2" data-type="defenders">DEF</div>
    <div class="box" id="RB" data-type="defenders">DEF</div>

    <div class="box" id="GK" data-type="keepers">GK</div>

</div>

<div class="tabs">
    <button class="tab-btn active" data-type="attackers">Attackers</button>
    <button class="tab-btn" data-type="midfielders">Midfielders</button>
    <button class="tab-btn" data-type="defenders">Defenders</button>
    <button class="tab-btn" data-type="keepers">Goalkeepers</button>
</div>

<div class="slider-container" id="playerSlider">
    <!-- Attackers -->
    <img draggable="true" class="player-img attackers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/dembele.png?raw=true">
    <img draggable="true" class="player-img attackers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/kavara.png?raw=true">
    <img draggable="true" class="player-img attackers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/doue.png?raw=true">
    <img draggable="true" class="player-img attackers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/raphinia.png?raw=true">
    <img draggable="true" class="player-img attackers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/osimhen.png?raw=true">
    <img draggable="true" class="player-img attackers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/olise.png?raw=true">
    <img draggable="true" class="player-img attackers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/mbappe.png?raw=true">
    <img draggable="true" class="player-img attackers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/lewa.png?raw=true">
    <img draggable="true" class="player-img attackers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/lautaro.png?raw=true">
    <img draggable="true" class="player-img attackers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/kane.png?raw=true">
    <img draggable="true" class="player-img attackers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/haaland.png?raw=true">
    <img draggable="true" class="player-img attackers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/gyokres.png?raw=true">
    <img draggable="true" class="player-img attackers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/guirassy.png?raw=true">
    <img draggable="true" class="player-img attackers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/yamal.png?raw=true">
    <img draggable="true" class="player-img attackers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/salah.png?raw=true">
    <!-- Midfielders -->
    <img draggable="true" class="player-img midfielders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/barella.png?raw=true">
    <img draggable="true" class="player-img midfielders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/bruno.png?raw=true">
    <img draggable="true" class="player-img midfielders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/caicedo.png?raw=true">
    <img draggable="true" class="player-img midfielders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/coldpalmer.png?raw=true">
    <img draggable="true" class="player-img midfielders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/enzofernandez.png?raw=true">
    <img draggable="true" class="player-img midfielders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/fabianruiz.png?raw=true">
    <img draggable="true" class="player-img midfielders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/pedri.png?raw=true">
    <img draggable="true" class="player-img midfielders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/gravenchberg.png?raw=true">
    <img draggable="true" class="player-img midfielders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/macallister.png?raw=true">
    <img draggable="true" class="player-img midfielders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/mctominiy.png?raw=true">
    <img draggable="true" class="player-img midfielders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/neves.png?raw=true">
    <img draggable="true" class="player-img midfielders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/rice.png?raw=true">
    <img draggable="true" class="player-img midfielders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/vitiniha.png?raw=true">
    <img draggable="true" class="player-img midfielders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/joshua.png?raw=true">
    <img draggable="true" class="player-img midfielders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/jude.png?raw=true">

    <!-- Defenders -->
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/15.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/23.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/cubarsi.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/cucrella.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/dimarco.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/dumfries.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/gabriel.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/konate.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/kounde.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/upamecano.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/marquihnihos.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/pacho.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/rudiger.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/tah.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/saliba.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/virgilvandijk.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/bastoni.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/inigo.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/nunomendes.png?raw=true">
    <img draggable="true" class="player-img defenders" src="https://github.com/konnidex/konnidex-toty/blob/main/images/cristianromero.png?raw=true">

    <!-- Keepers -->
    <img draggable="true" class="player-img keepers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/courtious.png?raw=true">
    <img draggable="true" class="player-img keepers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/alisson.png?raw=true">
    <img draggable="true" class="player-img keepers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/oblak.png?raw=true">
    <img draggable="true" class="player-img keepers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/raya.png?raw=true">
    <img draggable="true" class="player-img keepers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/sels.png?raw=true">
    <img draggable="true" class="player-img keepers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/donna.png?raw=true">
    <img draggable="true" class="player-img keepers" src="https://github.com/konnidex/konnidex-toty/blob/main/images/sommer.png?raw=true">

</div>

<p style="
    color: #d4c369;
    font-size: 18px;
">
    *Take screenshot and submit vote
</p>

<a style="
background:#0e3460;
color:#d4c369;
right:243px;
font-size:20px;
padding:12px 22px;
border-radius:12px;
text-decoration:none;
font-weight:600;
box-shadow:0 4px 10px rgba(0,0,0,0.3);
" 
class="btn btn-primary" 
href="https://tally.so/r/KYpldK" 
target="_blank" 
rel="noopener noreferrer">
Submit
</a>

<script>
let draggedPlayer = null;
let draggedFromBox = null;
let touchClone = null;
let currentTouchBox = null;

const slider = document.getElementById("playerSlider");
const boxes = document.querySelectorAll(".box");

// ---------------- DESKTOP DRAG -----------------
document.addEventListener("dragstart", e => {
    if (e.target.classList.contains("player-img")) {
        draggedPlayer = e.target;
        draggedFromBox = draggedPlayer.parentElement.classList.contains("box")
            ? draggedPlayer.parentElement
            : null;
    }
});

boxes.forEach(box => {
    box.addEventListener("dragover", e => e.preventDefault());
    box.addEventListener("drop", () => dropIntoBox(box));
});

slider.addEventListener("dragover", e => e.preventDefault());
slider.addEventListener("drop", () => dropToSlider());

// ---------------- TOUCH DRAG (MOBILE) -----------------
document.querySelectorAll(".player-img").forEach(img => {
    img.addEventListener("touchstart", e => {
        draggedPlayer = img;
        draggedFromBox = img.parentElement.classList.contains("box") 
            ? img.parentElement 
            : null;

        touchClone = img.cloneNode(true);
        touchClone.style.position = "fixed";
        touchClone.style.width = img.offsetWidth + "px";
        touchClone.style.height = img.offsetHeight + "px";
        touchClone.style.pointerEvents = "none";
        touchClone.style.opacity = "0.8";

        document.body.appendChild(touchClone);
    });

    img.addEventListener("touchmove", e => {
        let t = e.touches[0];
        touchClone.style.left = t.clientX - 45 + "px";
        touchClone.style.top = t.clientY - 45 + "px";

        // detect box under touch
        currentTouchBox = [...boxes].find(b => {
            let rect = b.getBoundingClientRect();
            return (
                t.clientX > rect.left &&
                t.clientX < rect.right &&
                t.clientY > rect.top &&
                t.clientY < rect.bottom
            );
        });

        e.preventDefault();
    });

    img.addEventListener("touchend", e => {
        if (currentTouchBox) {
            dropIntoBox(currentTouchBox);
        } else {
            dropToSlider();
        }

        if (touchClone) touchClone.remove();
        touchClone = null;
        draggedPlayer = null;
        draggedFromBox = null;
    });
});

// --------------- DROP INTO BOX ----------------
function dropIntoBox(box) {
    if (!draggedPlayer) return;

    let required = box.dataset.type;
    let type = [...draggedPlayer.classList].find(c =>
        ["attackers", "midfielders", "defenders", "keepers"].includes(c)
    );

    if (required !== type) {
        draggedPlayer = null;
        draggedFromBox = null;
        return;
    }

    if (box.children.length > 0) {
        let existing = box.children[0];

        if (draggedFromBox) {
            draggedFromBox.appendChild(existing);
        } else {
            slider.appendChild(existing);
        }
    }

    box.innerHTML = "";
    box.appendChild(draggedPlayer);

    draggedPlayer = null;
    draggedFromBox = null;
}

// --------------- DROP BACK TO SLIDER --------------
function dropToSlider() {
    if (!draggedPlayer) return;
    slider.appendChild(draggedPlayer);
    draggedPlayer = null;
    draggedFromBox = null;
}

// ---------------- CATEGORY FILTER ----------------
document.querySelectorAll(".tab-btn").forEach(btn => {
    btn.addEventListener("click", () => {
        document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");

        let type = btn.dataset.type;

        slider.querySelectorAll(".player-img").forEach(img => {
            if (img.parentElement.classList.contains("box")) return; // don't hide picked players
            img.style.display = img.classList.contains(type) ? "inline-block" : "none";
        });
    });
});

// ---------------- DEFAULT CATEGORY ----------------
window.onload = () => {
    let defaultType = "attackers";

    slider.querySelectorAll(".player-img").forEach(img => {
        if (!img.parentElement.classList.contains("box")) {
            img.style.display = img.classList.contains(defaultType) ? "inline-block" : "none";
        }
    });
};
(function() {
  const slider = document.getElementById("playerSlider");
  if (!slider) return;

  // ----- Create buttons (dynamically) -----
  const makeBtn = (dir) => {
    const b = document.createElement("button");
    b.className = "slider-arrow " + dir;
    b.setAttribute("aria-label", dir === "left" ? "Scroll left" : "Scroll right");
    b.innerHTML = dir === "left" ? "◀" : "▶";
    // basic styles (kept minimal & scoped to .slider-arrow)
    Object.assign(b.style, {
      position: "absolute",
      top: "50%",
      transform: "translateY(-50%)",
      zIndex: 999,
      border: "none",
      padding: "10px 12px",
      fontSize: "18px",
      borderRadius: "8px",
      background: "rgba(14,52,96,0.95)",
      color: "#d4c369",
      boxShadow: "0 4px 10px rgba(0,0,0,0.25)",
      cursor: "pointer",
      userSelect: "none",
      display: "flex",
      alignItems: "center",
      justifyContent: "center"
    });
    return b;
  };

  // container for positioning relative to slider
  const container = document.createElement("div");
  Object.assign(container.style, {
    position: "relative",
    width: "100%",
    marginTop: "8px" // small spacing to avoid overlap
  });

  // insert container before slider, then move slider inside container
  slider.parentNode.insertBefore(container, slider);
  container.appendChild(slider);

  const leftBtn = makeBtn("left");
  const rightBtn = makeBtn("right");
  // position buttons
  leftBtn.style.left = "6px";
  rightBtn.style.right = "6px";

  container.appendChild(leftBtn);
  container.appendChild(rightBtn);

  // ----- Scroll behavior -----
  const scrollAmount = Math.max(200, Math.round(slider.clientWidth * 0.6));
  let scrollInterval = null;

  const startScroll = (dir) => {
    stopScroll();
    // initial smooth scroll
    slider.scrollBy({ left: dir === "left" ? -scrollAmount : scrollAmount, behavior: "smooth" });
    // if user holds, continue scrolling every 120ms
    scrollInterval = setInterval(() => {
      slider.scrollBy({ left: dir === "left" ? -120 : 120 });
    }, 120);
  };
  const stopScroll = () => {
    if (scrollInterval) {
      clearInterval(scrollInterval);
      scrollInterval = null;
    }
  };

  // mouse interactions
  leftBtn.addEventListener("mousedown", (e) => { e.preventDefault(); startScroll("left"); });
  rightBtn.addEventListener("mousedown", (e) => { e.preventDefault(); startScroll("right"); });
  document.addEventListener("mouseup", stopScroll);
  leftBtn.addEventListener("mouseleave", stopScroll);
  rightBtn.addEventListener("mouseleave", stopScroll);

  // touch interactions (mobile)
  leftBtn.addEventListener("touchstart", (e) => { e.preventDefault(); startScroll("left"); }, {passive:false});
  rightBtn.addEventListener("touchstart", (e) => { e.preventDefault(); startScroll("right"); }, {passive:false});
  document.addEventListener("touchend", stopScroll);

  // ----- Wheel support for horizontal scrolling -----
  slider.addEventListener("wheel", (e) => {
    // prefer horizontal scroll; if vertical, convert to horizontal
    if (Math.abs(e.deltaY) > Math.abs(e.deltaX)) {
      slider.scrollBy({ left: e.deltaY, behavior: "auto" });
      e.preventDefault();
    }
  }, { passive: false });

  // ----- Pointer drag for slider (only when dragging the slider itself,
  // not when drag-starting a player image). This preserves player-image drag behavior. -----
  let isPointerDown = false;
  let startX = 0;
  let startScrollLeft = 0;

  slider.addEventListener("pointerdown", (e) => {
    // only start slider drag if the pointer target is the slider (or its container),
    // not when a player image is the target (so image drag won't be blocked).
    if (e.target.classList && e.target.classList.contains("player-img")) return;
    isPointerDown = true;
    slider.setPointerCapture(e.pointerId);
    startX = e.clientX;
    startScrollLeft = slider.scrollLeft;
    slider.style.cursor = "grabbing";
    e.preventDefault();
  });

  slider.addEventListener("pointermove", (e) => {
    if (!isPointerDown) return;
    const dx = e.clientX - startX;
    slider.scrollLeft = startScrollLeft - dx;
  });

  const endPointer = (e) => {
    if (!isPointerDown) return;
    isPointerDown = false;
    try { slider.releasePointerCapture && slider.releasePointerCapture(e.pointerId); } catch (err) {}
    slider.style.cursor = "grab";
  };

  slider.addEventListener("pointerup", endPointer);
  slider.addEventListener("pointercancel", endPointer);
  slider.addEventListener("pointerleave", endPointer);

  // ----- small accessibility: hide buttons when touch devices in narrow view? -----
  const updateButtonVisibility = () => {
    // keep visible always but reduce size on very small screens
    if (window.innerWidth < 420) {
      leftBtn.style.padding = "8px 10px";
      rightBtn.style.padding = "8px 10px";
    } else {
      leftBtn.style.padding = "10px 12px";
      rightBtn.style.padding = "10px 12px";
    }
  };
  window.addEventListener("resize", updateButtonVisibility);
  updateButtonVisibility();

  // done
})();
</script>






</body>
</html>

